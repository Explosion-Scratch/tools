var je=Object.defineProperty,Ne=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ie=(o,e,t)=>e in o?je(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,H=(o,e)=>{for(var t in e||(e={}))Ce.call(e,t)&&ie(o,t,e[t]);if(ae)for(var t of ae(e))Te.call(e,t)&&ie(o,t,e[t]);return o},W=(o,e)=>Ne(o,Ve(e));import{S as F,i as K,s as Z,e as g,k as j,N as ye,c as b,a as k,d as v,m as N,Z as P,b as _,F as m,g as S,E as G,v as X,$ as Y,t as C,w as we,h as T,x as Ee,y as xe,j as L,q as $,o as M,B as Se,L as Q,n as ee,p as te,V as De,u as $e,al as B,O as oe,U as qe,W as ce,l as ue}from"../chunks/index-b92f0203.js";import{l as J}from"../chunks/store-06e9ac32.js";import{u as he}from"../chunks/utils-39eb2155.js";import"../chunks/index-c9376b27.js";function Me(o){let e,t,r,l,c,s,u,a;return{c(){e=g("script"),r=g("script"),c=g("script"),u=j(),a=g("canvas"),this.h()},l(n){const i=ye('[data-svelte="svelte-1i3dr7q"]',document.head);e=b(i,"SCRIPT",{src:!0});var h=k(e);h.forEach(v),r=b(i,"SCRIPT",{src:!0});var f=k(r);f.forEach(v),c=b(i,"SCRIPT",{src:!0});var p=k(c);p.forEach(v),i.forEach(v),u=N(n),a=b(n,"CANVAS",{class:!0}),k(a).forEach(v),this.h()},h(){P(e.src,t="https://cdn.jsdelivr.net/npm/chart.js")||_(e,"src",t),P(r.src,l="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8")||_(r,"src",l),r.defer=!0,P(c.src,s="https://unpkg.com/chartjs-plugin-zoom@1.2.1/dist/chartjs-plugin-zoom.min.js")||_(c,"src",s),c.defer=!0,_(a,"class","chart")},m(n,i){m(document.head,e),m(document.head,r),m(document.head,c),S(n,u,i),S(n,a,i),o[3](a)},p:G,i:G,o:G,d(n){v(e),v(r),v(c),n&&v(u),n&&v(a),o[3](null)}}}function Ge(o,e,t){let r,{limits:l={}}=e,{graphs:c=[]}=e;X(async()=>{const u=await he(()=>window.Chart);fetch("https://unpkg.com/chartjs-plugin-zoom@1.2.1/dist/chartjs-plugin-zoom.min.js").then(a=>a.text()).then(eval).then(()=>{he(()=>window.ChartZoom).then(()=>u.register(window.ChartZoom))}),new u(r,{type:"line",data:{datasets:c.map(a=>({label:a.name,tension:.3,pointRadius:0,borderColor:["#357B85"],data:a.points}))},options:{responsive:!0,scales:{x:{type:"linear",position:"bottom"}},plugins:{zoom:{limits:{x:{min:l.minX,max:l.maxX},y:{min:l.minY,max:l.maxY}},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0}}},responsive:!0,maintainAspectRatio:!0}})});function s(u){Y[u?"unshift":"push"](()=>{r=u,t(0,r)})}return o.$$set=u=>{"limits"in u&&t(1,l=u.limits),"graphs"in u&&t(2,c=u.graphs)},[r,l,c,s]}class Le extends F{constructor(e){super(),K(this,e,Ge,Me,Z,{limits:1,graphs:2})}}function pe(o,e,t){const r=o.slice();return r[4]=e[t],r}function ve(o,e,t){const r=o.slice();return r[7]=e[t],r}function de(o,e,t){const r=o.slice();return r[10]=e[t],r}function fe(o){let e,t,r=o[0].allGraphData[0].actionName+"",l,c,s,u,a;return u=new Le({props:{graphs:o[0].allGraphData[0].rawGraphData.curveData.map(be).flat().map(ke),limits:o[0].allGraphData[0].displayRange}}),{c(){e=g("div"),t=g("h2"),l=C(r),c=j(),s=j(),we(u.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=k(e);t=b(i,"H2",{class:!0});var h=k(t);l=T(h,r),h.forEach(v),c=N(i),s=N(i),Ee(u.$$.fragment,i),i.forEach(v),this.h()},h(){_(t,"class","actionName svelte-1s9unyk"),_(e,"class","action svelte-1s9unyk")},m(n,i){S(n,e,i),m(e,t),m(t,l),m(e,c),m(e,s),xe(u,e,null),a=!0},p(n,i){(!a||i&1)&&r!==(r=n[0].allGraphData[0].actionName+"")&&L(l,r);const h={};i&1&&(h.graphs=n[0].allGraphData[0].rawGraphData.curveData.map(be).flat().map(ke)),i&1&&(h.limits=n[0].allGraphData[0].displayRange),u.$set(h)},i(n){a||($(u.$$.fragment,n),a=!0)},o(n){M(u.$$.fragment,n),a=!1},d(n){n&&v(e),Se(u)}}}function me(o){let e,t,r=o[10].prevExpression+"",l,c,s,u=o[10].expression+"",a,n,i,h=o[10].step+"",f;return{c(){e=g("div"),t=g("div"),l=C(r),c=j(),s=g("div"),a=C(u),n=j(),i=g("div"),f=C(h),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=k(e);t=b(d,"DIV",{class:!0});var y=k(t);l=T(y,r),y.forEach(v),c=N(d),s=b(d,"DIV",{class:!0});var I=k(s);a=T(I,u),I.forEach(v),d.forEach(v),n=N(p),i=b(p,"DIV",{class:!0});var w=k(i);f=T(w,h),w.forEach(v),this.h()},h(){_(t,"class","from svelte-1s9unyk"),_(s,"class","to svelte-1s9unyk"),_(e,"class","from_to_container svelte-1s9unyk"),_(i,"class","text svelte-1s9unyk")},m(p,d){S(p,e,d),m(e,t),m(t,l),m(e,c),m(e,s),m(s,a),S(p,n,d),S(p,i,d),m(i,f)},p(p,d){d&1&&r!==(r=p[10].prevExpression+"")&&L(l,r),d&1&&u!==(u=p[10].expression+"")&&L(a,u),d&1&&h!==(h=p[10].step+"")&&L(f,h)},d(p){p&&v(e),p&&v(n),p&&v(i)}}}function _e(o){let e,t=o[7].templateName+"",r,l,c,s=o[7].steps,u=[];for(let a=0;a<s.length;a+=1)u[a]=me(de(o,s,a));return{c(){e=g("h4"),r=C(t),l=j(),c=g("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=b(a,"H4",{class:!0});var n=k(e);r=T(n,t),n.forEach(v),l=N(a),c=b(a,"DIV",{class:!0});var i=k(c);for(let h=0;h<u.length;h+=1)u[h].l(i);i.forEach(v),this.h()},h(){_(e,"class","solutionName svelte-1s9unyk"),_(c,"class","steps svelte-1s9unyk")},m(a,n){S(a,e,n),m(e,r),S(a,l,n),S(a,c,n);for(let i=0;i<u.length;i+=1)u[i].m(c,null)},p(a,n){if(n&1&&t!==(t=a[7].templateName+"")&&L(r,t),n&1){s=a[7].steps;let i;for(i=0;i<s.length;i+=1){const h=de(a,s,i);u[i]?u[i].p(h,n):(u[i]=me(h),u[i].c(),u[i].m(c,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=s.length}},d(a){a&&v(e),a&&v(l),a&&v(c),Q(u,a)}}}function ge(o){let e,t,r=o[4].actionName+"",l,c,s,u=o[4].solution+"",a,n,i=o[4].templateSteps,h=[];for(let f=0;f<i.length;f+=1)h[f]=_e(ve(o,i,f));return{c(){e=g("div"),t=g("h2"),l=C(r),c=j(),s=g("div"),a=j();for(let f=0;f<h.length;f+=1)h[f].c();n=j(),this.h()},l(f){e=b(f,"DIV",{class:!0});var p=k(e);t=b(p,"H2",{class:!0});var d=k(t);l=T(d,r),d.forEach(v),c=N(p),s=b(p,"DIV",{class:!0});var y=k(s);y.forEach(v),a=N(p);for(let I=0;I<h.length;I+=1)h[I].l(p);n=N(p),p.forEach(v),this.h()},h(){_(t,"class","actionName svelte-1s9unyk"),_(s,"class","solution_text svelte-1s9unyk"),_(e,"class","action svelte-1s9unyk")},m(f,p){S(f,e,p),m(e,t),m(t,l),m(e,c),m(e,s),s.innerHTML=u,m(e,a);for(let d=0;d<h.length;d+=1)h[d].m(e,null);m(e,n)},p(f,p){if(p&1&&r!==(r=f[4].actionName+"")&&L(l,r),p&1&&u!==(u=f[4].solution+"")&&(s.innerHTML=u),p&1){i=f[4].templateSteps;let d;for(d=0;d<i.length;d+=1){const y=ve(f,i,d);h[d]?h[d].p(y,p):(h[d]=_e(y),h[d].c(),h[d].m(e,n))}for(;d<h.length;d+=1)h[d].d(1);h.length=i.length}},d(f){f&&v(e),Q(h,f)}}}function Oe(o){var u,a;let e,t,r,l=((a=(u=o[0].allGraphData)==null?void 0:u[0])==null?void 0:a.graphImageData)&&!o[2]&&fe(o),c=o[0].actions,s=[];for(let n=0;n<c.length;n+=1)s[n]=ge(pe(o,c,n));return{c(){e=g("div"),l&&l.c(),t=j();for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var i=k(e);l&&l.l(i),t=N(i);for(let h=0;h<s.length;h+=1)s[h].l(i);i.forEach(v),this.h()},h(){_(e,"class","result_container")},m(n,i){S(n,e,i),l&&l.m(e,null),m(e,t);for(let h=0;h<s.length;h+=1)s[h].m(e,null);o[3](e),r=!0},p(n,[i]){var h,f;if(((f=(h=n[0].allGraphData)==null?void 0:h[0])==null?void 0:f.graphImageData)&&!n[2]?l?(l.p(n,i),i&5&&$(l,1)):(l=fe(n),l.c(),$(l,1),l.m(e,t)):l&&(ee(),M(l,1,1,()=>{l=null}),te()),i&1){c=n[0].actions;let p;for(p=0;p<c.length;p+=1){const d=pe(n,c,p);s[p]?s[p].p(d,i):(s[p]=ge(d),s[p].c(),s[p].m(e,null))}for(;p<s.length;p+=1)s[p].d(1);s.length=c.length}},i(n){r||($(l),r=!0)},o(n){M(l),r=!1},d(n){n&&v(e),l&&l.d(),Q(s,n),o[3](null)}}}const be=o=>{var e;return((e=o.pointGroups)==null?void 0:e.length)>1?o.pointGroups.map(t=>W(H({},o),{pointGroups:[t]})):o},ke=o=>({name:o.curveExpression,points:o.pointGroups[0].points});function Pe(o,e,t){let r;De(o,J,u=>t(2,r=u));let{result:l={}}=e,c=document.body;X(()=>{console.log("Result component: ",l)}),$e(()=>{var u;console.log(window.renderMathInElement),(u=window==null?void 0:window.renderMathInElement)==null||u.call(window,c,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})});function s(u){Y[u?"unshift":"push"](()=>{c=u,t(1,c)})}return o.$$set=u=>{"result"in u&&t(0,l=u.result)},[l,c,r,s]}class Ae extends F{constructor(e){super(),K(this,e,Pe,Oe,Z,{result:0})}}function ze(o){let e;function t(c,s){return c[2]&&c[2].value?We:He}let r=t(o),l=r(o);return{c(){e=g("div"),l.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var s=k(e);l.l(s),s.forEach(v),this.h()},h(){_(e,"class","prompt_message svelte-i5sevh")},m(c,s){S(c,e,s),l.m(e,null)},p(c,s){r!==(r=t(c))&&(l.d(1),l=r(c),l&&(l.c(),l.m(e,null)))},i:G,o:G,d(c){c&&v(e),l.d()}}}function Ue(o){let e,t,r,l;const c=[Je,Be],s=[];function u(a,n){return a[0].isError||a[3].isError?0:1}return e=u(o),t=s[e]=c[e](o),{c(){t.c(),r=ue()},l(a){t.l(a),r=ue()},m(a,n){s[e].m(a,n),S(a,r,n),l=!0},p(a,n){let i=e;e=u(a),e===i?s[e].p(a,n):(ee(),M(s[i],1,1,()=>{s[i]=null}),te(),t=s[e],t?t.p(a,n):(t=s[e]=c[e](a),t.c()),$(t,1),t.m(r.parentNode,r))},i(a){l||($(t),l=!0)},o(a){M(t),l=!1},d(a){s[e].d(a),a&&v(r)}}}function He(o){let e;return{c(){e=C("Enter a math formula to solve!")},l(t){e=T(t,"Enter a math formula to solve!")},m(t,r){S(t,e,r)},d(t){t&&v(e)}}}function We(o){let e;return{c(){e=C("Click solve to try to solve!")},l(t){e=T(t,"Click solve to try to solve!")},m(t,r){S(t,e,r)},d(t){t&&v(e)}}}function Be(o){let e,t;return e=new Ae({props:{result:o[0]}}),{c(){we(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,l){xe(e,r,l),t=!0},p(r,l){const c={};l&1&&(c.result=r[0]),e.$set(c)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Se(e,r)}}}function Je(o){let e,t,r=(o[3].errorMessage||o[0].errorDisplayMessage||o[0].errorMessage||"Math invalid")+"",l;return{c(){e=g("span"),t=C("There was an error: "),l=C(r),this.h()},l(c){e=b(c,"SPAN",{class:!0});var s=k(e);t=T(s,"There was an error: "),l=T(s,r),s.forEach(v),this.h()},h(){_(e,"class","error svelte-i5sevh")},m(c,s){S(c,e,s),m(e,t),m(e,l)},p(c,s){s&9&&r!==(r=(c[3].errorMessage||c[0].errorDisplayMessage||c[0].errorMessage||"Math invalid")+"")&&L(l,r)},i:G,o:G,d(c){c&&v(e)}}}function Fe(o){let e,t,r,l,c,s,u,a,n,i,h,f,p,d,y,I,w,E,x,R,A;const U=[Ue,ze],q=[];function se(D,V){return D[0]?0:1}return w=se(o),E=q[w]=U[w](o),{c(){e=g("script"),r=g("link"),l=g("script"),s=g("script"),a=j(),n=g("div"),i=g("div"),h=g("math-field"),f=j(),p=g("button"),d=C("Solve"),y=j(),I=g("div"),E.c(),this.h()},l(D){const V=ye('[data-svelte="svelte-1e56vpb"]',document.head);e=b(V,"SCRIPT",{src:!0,class:!0});var z=k(e);z.forEach(v),r=b(V,"LINK",{rel:!0,href:!0,class:!0}),l=b(V,"SCRIPT",{src:!0,class:!0});var Ie=k(l);Ie.forEach(v),s=b(V,"SCRIPT",{src:!0,class:!0});var Re=k(s);Re.forEach(v),V.forEach(v),a=N(D),n=b(D,"DIV",{class:!0});var re=k(n);i=b(re,"DIV",{class:!0});var O=k(i);h=b(O,"MATH-FIELD",{"smart-mode":!0,defaultmode:!0,"virtual-keyboard-mode":!0,class:!0}),k(h).forEach(v),f=N(O),p=b(O,"BUTTON",{class:!0});var le=k(p);d=T(le,"Solve"),le.forEach(v),y=N(O),I=b(O,"DIV",{class:!0});var ne=k(I);E.l(ne),ne.forEach(v),O.forEach(v),re.forEach(v),this.h()},h(){P(e.src,t="https://unpkg.com/mathlive@0.73.4/dist/mathlive.min.js")||_(e,"src",t),_(e,"class","svelte-i5sevh"),_(r,"rel","stylesheet"),_(r,"href","https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"),_(r,"class","svelte-i5sevh"),l.defer=!0,P(l.src,c="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js")||_(l,"src",c),_(l,"class","svelte-i5sevh"),s.defer=!0,P(s.src,u="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js")||_(s,"src",u),_(s,"class","svelte-i5sevh"),B(h,"smart-mode",""),B(h,"defaultmode","math"),B(h,"virtual-keyboard-mode","manual"),B(h,"class","svelte-i5sevh"),_(p,"class","solve svelte-i5sevh"),_(I,"class","result svelte-i5sevh"),_(i,"class","inner_container svelte-i5sevh"),_(n,"class","container svelte-i5sevh")},m(D,V){m(document.head,e),m(document.head,r),m(document.head,l),m(document.head,s),S(D,a,V),S(D,n,V),m(n,i),m(i,h),o[6](h),m(i,f),m(i,p),m(p,d),m(i,y),m(i,I),q[w].m(I,null),x=!0,R||(A=[oe(h,"input",o[5]),oe(p,"click",o[4])],R=!0)},p(D,[V]){let z=w;w=se(D),w===z?q[w].p(D,V):(ee(),M(q[z],1,1,()=>{q[z]=null}),te(),E=q[w],E?E.p(D,V):(E=q[w]=U[w](D),E.c()),$(E,1),E.m(I,null))},i(D){x||($(E),x=!0)},o(D){M(E),x=!1},d(D){v(e),v(r),v(l),v(s),D&&v(a),D&&v(n),o[6](null),q[w].d(),R=!1,qe(A)}}}function Ke(o,e,t){let r;De(o,J,h=>t(7,r=h));let l=null,c=String.raw`x = 3, y = x^2`,s=null,u={};X(()=>{window.mathField=s,s.setValue(new URLSearchParams(location.search).get("q")||c),new URLSearchParams(location.search).get("q")&&setTimeout(a),s.setOptions(W(H({},s.getOptions()),{smartSuperscript:!0,onKeystroke(h,f,p){f==="ctrl+[KeyA]"&&h.executeCommand("selectAll");const d=String.raw`\left.\begin{cases}`,y=String.raw`\end{cases}\right.`,I=String.raw`\placeholder{New equation}`,w=String.raw`\\{${I}}${y}`;if(f==="shift+[Enter]"){let x=s.value;if(x.startsWith(d)){console.log({START:d,ENDCASES:y},x.includes(y));let R=x.replace(new RegExp(`^${E(d)}`),"").replace(new RegExp(`${E(y)}$`),"");console.log(R),h.setValue(`${d}${R}${w}`)}else{let R=s.position;h.setValue(d+`{${s.value}}`+w),t(2,s.position=R+7,s)}}function E(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}if(f==="[Backspace]"){if(s.value===String.raw`\left.\begin{cases}{}\end{cases}\right.`){s.setValue("");return}let x=s.value,R=String.raw`\\ {}`;if(console.log({val:x},x.startsWith(d),x.endsWith(R+y),R+y),x.startsWith(d)&&(x.endsWith(R+y)||x.endsWith(R+" "+y))){let A=x.replace(new RegExp(`^${E(d)}`),"").replace(new RegExp(`${E(R)}[ \\\\]*${E(y)}$`),"");console.log(A);let U=s.position;s.setValue(`${d}${A}${y}`),t(2,s.position=U-3,s)}}return f==="ctrl+[Backspace]"&&h.setValue(""),(f==="ctrl+[Enter]"||f==="[Enter]")&&a(),!0},inlineShortcuts:W(H({},s.getOptions("inlineShortcuts")),{"*":"\\cdot","**":"\\ast","***":"\\star","//":"\\slash","\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","o+":"\\oplus",ox:"\\otimes","o.":"\\odot","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceiling","~|":"\\rceiling",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail"})}))});async function a(){ce(J,r=!0,r);let h=c,f=await fetch("https://apis.explosionscratc.repl.co/fetch",{method:"POST",body:JSON.stringify({url:"https://mathsolver.microsoft.com/cameraexp/api/v1/solvelatex",args:{headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({latexExpression:h,clientInfo:{platform:"web",mkt:"en",skipGraphOutput:!0,skipBingVideoEntity:!0},customLatex:h,showCustomResult:!1}),referrer:`https://mathsolver.microsoft.com/en/solve-problem/${encodeURIComponent(h)}`,referrerPolicy:"strict-origin-when-cross-origin",method:"POST"}})}).then(y=>y.json());t(0,l=JSON.parse(JSON.parse(f.json.results[0].tags[0].actions[0].customData).previewText).mathSolverResult),t(3,u=JSON.parse(f.json.results[0].tags[0].actions[0].customData)),console.log(u);let p=new URL(location),d=new URLSearchParams(location.search);d.set("q",l.detectedLatex),p.search=d,history.pushState({result:l},"Math solver",p),ce(J,r=!1,r)}const n=h=>t(1,c=h.target.value);function i(h){Y[h?"unshift":"push"](()=>{s=h,t(2,s)})}return[l,c,s,u,a,n,i]}class tt extends F{constructor(e){super(),K(this,e,Ke,Fe,Z,{})}}export{tt as default};
