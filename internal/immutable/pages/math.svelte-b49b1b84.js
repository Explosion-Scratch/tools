var ke=Object.defineProperty,ye=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var ee=(i,e,s)=>e in i?ke(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s,B=(i,e)=>{for(var s in e||(e={}))Ee.call(e,s)&&ee(i,s,e[s]);if(Y)for(var s of Y(e))Se.call(e,s)&&ee(i,s,e[s]);return i},J=(i,e)=>ye(i,we(e));import{S as he,i as ve,s as de,e as b,t as V,k as R,c as k,a as y,h as M,d as p,m as T,b as m,Z as A,g as I,F as _,j as L,L as F,E as O,v as fe,u as xe,$ as pe,N as De,al as W,O as te,o as G,p as me,q as U,U as Ie,V as Ne,W as se,n as _e,l as re,w as $e,x as Ve,y as Re,B as Me}from"../chunks/index-b92f0203.js";import{l as z}from"../chunks/store-06e9ac32.js";import"../chunks/index-c9376b27.js";function le(i,e,s){const t=i.slice();return t[3]=e[s],t}function oe(i,e,s){const t=i.slice();return t[6]=e[s],t}function ae(i,e,s){const t=i.slice();return t[9]=e[s],t}function ne(i){let e,s,t=i[0].allGraphData[0].actionName+"",n,o,r,d,l;return{c(){e=b("div"),s=b("h2"),n=V(t),o=R(),r=b("img"),this.h()},l(u){e=k(u,"DIV",{class:!0});var a=y(e);s=k(a,"H2",{class:!0});var c=y(s);n=M(c,t),c.forEach(p),o=T(a),r=k(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(p),this.h()},h(){m(s,"class","actionName svelte-1s9unyk"),m(r,"class","graph svelte-1s9unyk"),A(r.src,d=i[0].allGraphData[0].graphImageData)||m(r,"src",d),m(r,"alt",l="Graph of "+i[0].detectedLatex),m(e,"class","action svelte-1s9unyk")},m(u,a){I(u,e,a),_(e,s),_(s,n),_(e,o),_(e,r)},p(u,a){a&1&&t!==(t=u[0].allGraphData[0].actionName+"")&&L(n,t),a&1&&!A(r.src,d=u[0].allGraphData[0].graphImageData)&&m(r,"src",d),a&1&&l!==(l="Graph of "+u[0].detectedLatex)&&m(r,"alt",l)},d(u){u&&p(e)}}}function ie(i){let e,s,t=i[9].prevExpression+"",n,o,r,d=i[9].expression+"",l,u,a,c=i[9].step+"",h;return{c(){e=b("div"),s=b("div"),n=V(t),o=R(),r=b("div"),l=V(d),u=R(),a=b("div"),h=V(c),this.h()},l(f){e=k(f,"DIV",{class:!0});var v=y(e);s=k(v,"DIV",{class:!0});var g=y(s);n=M(g,t),g.forEach(p),o=T(v),r=k(v,"DIV",{class:!0});var D=y(r);l=M(D,d),D.forEach(p),v.forEach(p),u=T(f),a=k(f,"DIV",{class:!0});var w=y(a);h=M(w,c),w.forEach(p),this.h()},h(){m(s,"class","from svelte-1s9unyk"),m(r,"class","to svelte-1s9unyk"),m(e,"class","from_to_container svelte-1s9unyk"),m(a,"class","text svelte-1s9unyk")},m(f,v){I(f,e,v),_(e,s),_(s,n),_(e,o),_(e,r),_(r,l),I(f,u,v),I(f,a,v),_(a,h)},p(f,v){v&1&&t!==(t=f[9].prevExpression+"")&&L(n,t),v&1&&d!==(d=f[9].expression+"")&&L(l,d),v&1&&c!==(c=f[9].step+"")&&L(h,c)},d(f){f&&p(e),f&&p(u),f&&p(a)}}}function ce(i){let e,s=i[6].templateName+"",t,n,o,r=i[6].steps,d=[];for(let l=0;l<r.length;l+=1)d[l]=ie(ae(i,r,l));return{c(){e=b("h4"),t=V(s),n=R(),o=b("div");for(let l=0;l<d.length;l+=1)d[l].c();this.h()},l(l){e=k(l,"H4",{class:!0});var u=y(e);t=M(u,s),u.forEach(p),n=T(l),o=k(l,"DIV",{class:!0});var a=y(o);for(let c=0;c<d.length;c+=1)d[c].l(a);a.forEach(p),this.h()},h(){m(e,"class","solutionName svelte-1s9unyk"),m(o,"class","steps svelte-1s9unyk")},m(l,u){I(l,e,u),_(e,t),I(l,n,u),I(l,o,u);for(let a=0;a<d.length;a+=1)d[a].m(o,null)},p(l,u){if(u&1&&s!==(s=l[6].templateName+"")&&L(t,s),u&1){r=l[6].steps;let a;for(a=0;a<r.length;a+=1){const c=ae(l,r,a);d[a]?d[a].p(c,u):(d[a]=ie(c),d[a].c(),d[a].m(o,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=r.length}},d(l){l&&p(e),l&&p(n),l&&p(o),F(d,l)}}}function ue(i){let e,s,t=i[3].actionName+"",n,o,r,d=i[3].solution+"",l,u,a=i[3].templateSteps,c=[];for(let h=0;h<a.length;h+=1)c[h]=ce(oe(i,a,h));return{c(){e=b("div"),s=b("h2"),n=V(t),o=R(),r=b("div"),l=R();for(let h=0;h<c.length;h+=1)c[h].c();u=R(),this.h()},l(h){e=k(h,"DIV",{class:!0});var f=y(e);s=k(f,"H2",{class:!0});var v=y(s);n=M(v,t),v.forEach(p),o=T(f),r=k(f,"DIV",{class:!0});var g=y(r);g.forEach(p),l=T(f);for(let D=0;D<c.length;D+=1)c[D].l(f);u=T(f),f.forEach(p),this.h()},h(){m(s,"class","actionName svelte-1s9unyk"),m(r,"class","solution_text svelte-1s9unyk"),m(e,"class","action svelte-1s9unyk")},m(h,f){I(h,e,f),_(e,s),_(s,n),_(e,o),_(e,r),r.innerHTML=d,_(e,l);for(let v=0;v<c.length;v+=1)c[v].m(e,null);_(e,u)},p(h,f){if(f&1&&t!==(t=h[3].actionName+"")&&L(n,t),f&1&&d!==(d=h[3].solution+"")&&(r.innerHTML=d),f&1){a=h[3].templateSteps;let v;for(v=0;v<a.length;v+=1){const g=oe(h,a,v);c[v]?c[v].p(g,f):(c[v]=ce(g),c[v].c(),c[v].m(e,u))}for(;v<c.length;v+=1)c[v].d(1);c.length=a.length}},d(h){h&&p(e),F(c,h)}}}function Te(i){var r,d;let e,s,t=((d=(r=i[0].allGraphData)==null?void 0:r[0])==null?void 0:d.graphImageData)&&ne(i),n=i[0].actions,o=[];for(let l=0;l<n.length;l+=1)o[l]=ue(le(i,n,l));return{c(){e=b("div"),t&&t.c(),s=R();for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var u=y(e);t&&t.l(u),s=T(u);for(let a=0;a<o.length;a+=1)o[a].l(u);u.forEach(p),this.h()},h(){m(e,"class","result_container")},m(l,u){I(l,e,u),t&&t.m(e,null),_(e,s);for(let a=0;a<o.length;a+=1)o[a].m(e,null);i[2](e)},p(l,[u]){var a,c;if((c=(a=l[0].allGraphData)==null?void 0:a[0])!=null&&c.graphImageData?t?t.p(l,u):(t=ne(l),t.c(),t.m(e,s)):t&&(t.d(1),t=null),u&1){n=l[0].actions;let h;for(h=0;h<n.length;h+=1){const f=le(l,n,h);o[h]?o[h].p(f,u):(o[h]=ue(f),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=n.length}},i:O,o:O,d(l){l&&p(e),t&&t.d(),F(o,l),i[2](null)}}}function qe(i,e,s){let{result:t={}}=e,n=document.body;fe(()=>{console.log("Result component: ",t)}),xe(()=>{var r;console.log(window.renderMathInElement),(r=window==null?void 0:window.renderMathInElement)==null||r.call(window,n,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})});function o(r){pe[r?"unshift":"push"](()=>{n=r,s(1,n)})}return i.$$set=r=>{"result"in r&&s(0,t=r.result)},[t,n,o]}class Le extends he{constructor(e){super(),ve(this,e,qe,Te,de,{result:0})}}function je(i){let e;function s(o,r){return o[2]&&o[2].value?Pe:Ce}let t=s(i),n=t(i);return{c(){e=b("div"),n.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var r=y(e);n.l(r),r.forEach(p),this.h()},h(){m(e,"class","prompt_message svelte-i5sevh")},m(o,r){I(o,e,r),n.m(e,null)},p(o,r){t!==(t=s(o))&&(n.d(1),n=t(o),n&&(n.c(),n.m(e,null)))},i:O,o:O,d(o){o&&p(e),n.d()}}}function Oe(i){let e,s,t,n;const o=[Ge,Ae],r=[];function d(l,u){return l[0].isError||l[3].isError?0:1}return e=d(i),s=r[e]=o[e](i),{c(){s.c(),t=re()},l(l){s.l(l),t=re()},m(l,u){r[e].m(l,u),I(l,t,u),n=!0},p(l,u){let a=e;e=d(l),e===a?r[e].p(l,u):(_e(),G(r[a],1,1,()=>{r[a]=null}),me(),s=r[e],s?s.p(l,u):(s=r[e]=o[e](l),s.c()),U(s,1),s.m(t.parentNode,t))},i(l){n||(U(s),n=!0)},o(l){G(s),n=!1},d(l){r[e].d(l),l&&p(t)}}}function Ce(i){let e;return{c(){e=V("Enter a math formula to solve!")},l(s){e=M(s,"Enter a math formula to solve!")},m(s,t){I(s,e,t)},d(s){s&&p(e)}}}function Pe(i){let e;return{c(){e=V("Click solve to try to solve!")},l(s){e=M(s,"Click solve to try to solve!")},m(s,t){I(s,e,t)},d(s){s&&p(e)}}}function Ae(i){let e,s;return e=new Le({props:{result:i[0]}}),{c(){$e(e.$$.fragment)},l(t){Ve(e.$$.fragment,t)},m(t,n){Re(e,t,n),s=!0},p(t,n){const o={};n&1&&(o.result=t[0]),e.$set(o)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){Me(e,t)}}}function Ge(i){let e,s,t=(i[3].errorMessage||i[0].errorDisplayMessage||i[0].errorMessage||"Math invalid")+"",n;return{c(){e=b("span"),s=V("There was an error: "),n=V(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var r=y(e);s=M(r,"There was an error: "),n=M(r,t),r.forEach(p),this.h()},h(){m(e,"class","error svelte-i5sevh")},m(o,r){I(o,e,r),_(e,s),_(e,n)},p(o,r){r&9&&t!==(t=(o[3].errorMessage||o[0].errorDisplayMessage||o[0].errorMessage||"Math invalid")+"")&&L(n,t)},i:O,o:O,d(o){o&&p(e)}}}function Ue(i){let e,s,t,n,o,r,d,l,u,a,c,h,f,v,g,D,w,E,S,N,C;const H=[Oe,je],q=[];function K(x,$){return x[0]?0:1}return w=K(i),E=q[w]=H[w](i),{c(){e=b("script"),t=b("link"),n=b("script"),r=b("script"),l=R(),u=b("div"),a=b("div"),c=b("math-field"),h=R(),f=b("button"),v=V("Solve"),g=R(),D=b("div"),E.c(),this.h()},l(x){const $=De('[data-svelte="svelte-1e56vpb"]',document.head);e=k($,"SCRIPT",{src:!0,class:!0});var P=y(e);P.forEach(p),t=k($,"LINK",{rel:!0,href:!0,class:!0}),n=k($,"SCRIPT",{src:!0,class:!0});var ge=y(n);ge.forEach(p),r=k($,"SCRIPT",{src:!0,class:!0});var be=y(r);be.forEach(p),$.forEach(p),l=T(x),u=k(x,"DIV",{class:!0});var Z=y(u);a=k(Z,"DIV",{class:!0});var j=y(a);c=k(j,"MATH-FIELD",{"smart-mode":!0,defaultmode:!0,"virtual-keyboard-mode":!0,class:!0}),y(c).forEach(p),h=T(j),f=k(j,"BUTTON",{class:!0});var Q=y(f);v=M(Q,"Solve"),Q.forEach(p),g=T(j),D=k(j,"DIV",{class:!0});var X=y(D);E.l(X),X.forEach(p),j.forEach(p),Z.forEach(p),this.h()},h(){A(e.src,s="https://unpkg.com/mathlive@0.73.4/dist/mathlive.min.js")||m(e,"src",s),m(e,"class","svelte-i5sevh"),m(t,"rel","stylesheet"),m(t,"href","https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"),m(t,"class","svelte-i5sevh"),n.defer=!0,A(n.src,o="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js")||m(n,"src",o),m(n,"class","svelte-i5sevh"),r.defer=!0,A(r.src,d="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js")||m(r,"src",d),m(r,"class","svelte-i5sevh"),W(c,"smart-mode",""),W(c,"defaultmode","math"),W(c,"virtual-keyboard-mode","manual"),W(c,"class","svelte-i5sevh"),m(f,"class","solve svelte-i5sevh"),m(D,"class","result svelte-i5sevh"),m(a,"class","inner_container svelte-i5sevh"),m(u,"class","container svelte-i5sevh")},m(x,$){_(document.head,e),_(document.head,t),_(document.head,n),_(document.head,r),I(x,l,$),I(x,u,$),_(u,a),_(a,c),i[6](c),_(a,h),_(a,f),_(f,v),_(a,g),_(a,D),q[w].m(D,null),S=!0,N||(C=[te(c,"input",i[5]),te(f,"click",i[4])],N=!0)},p(x,[$]){let P=w;w=K(x),w===P?q[w].p(x,$):(_e(),G(q[P],1,1,()=>{q[P]=null}),me(),E=q[w],E?E.p(x,$):(E=q[w]=H[w](x),E.c()),U(E,1),E.m(D,null))},i(x){S||(U(E),S=!0)},o(x){G(E),S=!1},d(x){p(e),p(t),p(n),p(r),x&&p(l),x&&p(u),i[6](null),q[w].d(),N=!1,Ie(C)}}}function He(i,e,s){let t;Ne(i,z,c=>s(7,t=c));let n=null,o=String.raw`x = 3, y = x^2`,r=null,d={};fe(()=>{window.mathField=r,r.setValue(new URLSearchParams(location.search).get("q")||o),new URLSearchParams(location.search).get("q")&&setTimeout(l),r.setOptions(J(B({},r.getOptions()),{smartSuperscript:!0,onKeystroke(c,h,f){h==="ctrl+[KeyA]"&&c.executeCommand("selectAll");const v=String.raw`\left.\begin{cases}`,g=String.raw`\end{cases}\right.`,D=String.raw`\placeholder{New equation}`,w=String.raw`\\{${D}}${g}`;if(h==="shift+[Enter]"){let S=r.value;if(S.startsWith(v)){console.log({START:v,ENDCASES:g},S.includes(g));let N=S.replace(new RegExp(`^${E(v)}`),"").replace(new RegExp(`${E(g)}$`),"");console.log(N),c.setValue(`${v}${N}${w}`)}else{let N=r.position;c.setValue(v+`{${r.value}}`+w),s(2,r.position=N+7,r)}}function E(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}if(h==="[Backspace]"){if(r.value===String.raw`\left.\begin{cases}{}\end{cases}\right.`){r.setValue("");return}let S=r.value,N=String.raw`\\ {}`;if(console.log({val:S},S.startsWith(v),S.endsWith(N+g),N+g),S.startsWith(v)&&(S.endsWith(N+g)||S.endsWith(N+" "+g))){let C=S.replace(new RegExp(`^${E(v)}`),"").replace(new RegExp(`${E(N)}[ \\\\]*${E(g)}$`),"");console.log(C);let H=r.position;r.setValue(`${v}${C}${g}`),s(2,r.position=H-3,r)}}return h==="ctrl+[Backspace]"&&c.setValue(""),(h==="ctrl+[Enter]"||h==="[Enter]")&&l(),!0},inlineShortcuts:J(B({},r.getOptions("inlineShortcuts")),{"*":"\\cdot","**":"\\ast","***":"\\star","//":"\\slash","\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","o+":"\\oplus",ox:"\\otimes","o.":"\\odot","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceiling","~|":"\\rceiling",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail"})}))});async function l(){se(z,t=!0,t);let c=o,h=await fetch("https://apis.explosionscratc.repl.co/fetch",{method:"POST",body:JSON.stringify({url:"https://mathsolver.microsoft.com/cameraexp/api/v1/solvelatex",args:{headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({latexExpression:c,clientInfo:{platform:"web",mkt:"en",skipGraphOutput:!0,skipBingVideoEntity:!0},customLatex:c,showCustomResult:!1}),referrer:`https://mathsolver.microsoft.com/en/solve-problem/${encodeURIComponent(c)}`,referrerPolicy:"strict-origin-when-cross-origin",method:"POST"}})}).then(g=>g.json());s(0,n=JSON.parse(JSON.parse(h.json.results[0].tags[0].actions[0].customData).previewText).mathSolverResult),s(3,d=JSON.parse(h.json.results[0].tags[0].actions[0].customData)),console.log(d);let f=new URL(location),v=new URLSearchParams(location.search);v.set("q",n.detectedLatex),f.search=v,history.pushState({result:n},"Math solver",f),se(z,t=!1,t)}const u=c=>s(1,o=c.target.value);function a(c){pe[c?"unshift":"push"](()=>{r=c,s(2,r)})}return[n,o,r,d,l,u,a]}class Fe extends he{constructor(e){super(),ve(this,e,He,Ue,de,{})}}export{Fe as default};
