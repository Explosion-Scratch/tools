import{S as ne,i as oe,s as ie,e as b,t as M,k as V,c as k,a as g,h as N,d as u,m as j,b as v,g as I,F as p,j as O,L as B,E as R,v as ce,u as me,_ as ue,N as pe,a0 as J,aj as C,O as X,o as P,p as fe,q as L,U as ve,V as be,n as _e,W as Y,l as Z,w as ke,x as ge,y as ye,B as Ee}from"../chunks/index-0ee63240.js";import{l as U}from"../chunks/store-5cff5e15.js";import"../chunks/index-8bd30b3e.js";function ee(i,e,s){const t=i.slice();return t[3]=e[s],t}function te(i,e,s){const t=i.slice();return t[6]=e[s],t}function le(i,e,s){const t=i.slice();return t[9]=e[s],t}function se(i){let e,s,t=i[9].prevExpression+"",r,a,l,f=i[9].expression+"",o,h,n,c=i[9].step+"",m;return{c(){e=b("div"),s=b("div"),r=M(t),a=V(),l=b("div"),o=M(f),h=V(),n=b("div"),m=M(c),this.h()},l(_){e=k(_,"DIV",{class:!0});var d=g(e);s=k(d,"DIV",{class:!0});var w=g(s);r=N(w,t),w.forEach(u),a=j(d),l=k(d,"DIV",{class:!0});var x=g(l);o=N(x,f),x.forEach(u),d.forEach(u),h=j(_),n=k(_,"DIV",{class:!0});var E=g(n);m=N(E,c),E.forEach(u),this.h()},h(){v(s,"class","from svelte-a8kia8"),v(l,"class","to svelte-a8kia8"),v(e,"class","from_to_container svelte-a8kia8"),v(n,"class","text svelte-a8kia8")},m(_,d){I(_,e,d),p(e,s),p(s,r),p(e,a),p(e,l),p(l,o),I(_,h,d),I(_,n,d),p(n,m)},p(_,d){d&1&&t!==(t=_[9].prevExpression+"")&&O(r,t),d&1&&f!==(f=_[9].expression+"")&&O(o,f),d&1&&c!==(c=_[9].step+"")&&O(m,c)},d(_){_&&u(e),_&&u(h),_&&u(n)}}}function re(i){let e,s=i[6].templateName+"",t,r,a,l=i[6].steps,f=[];for(let o=0;o<l.length;o+=1)f[o]=se(le(i,l,o));return{c(){e=b("h4"),t=M(s),r=V(),a=b("div");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=k(o,"H4",{class:!0});var h=g(e);t=N(h,s),h.forEach(u),r=j(o),a=k(o,"DIV",{class:!0});var n=g(a);for(let c=0;c<f.length;c+=1)f[c].l(n);n.forEach(u),this.h()},h(){v(e,"class","solutionName svelte-a8kia8"),v(a,"class","steps svelte-a8kia8")},m(o,h){I(o,e,h),p(e,t),I(o,r,h),I(o,a,h);for(let n=0;n<f.length;n+=1)f[n].m(a,null)},p(o,h){if(h&1&&s!==(s=o[6].templateName+"")&&O(t,s),h&1){l=o[6].steps;let n;for(n=0;n<l.length;n+=1){const c=le(o,l,n);f[n]?f[n].p(c,h):(f[n]=se(c),f[n].c(),f[n].m(a,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=l.length}},d(o){o&&u(e),o&&u(r),o&&u(a),B(f,o)}}}function ae(i){let e,s,t=i[3].actionName+"",r,a,l,f=i[3].solution+"",o,h,n=i[3].templateSteps,c=[];for(let m=0;m<n.length;m+=1)c[m]=re(te(i,n,m));return{c(){e=b("div"),s=b("h2"),r=M(t),a=V(),l=b("div"),o=V();for(let m=0;m<c.length;m+=1)c[m].c();h=V(),this.h()},l(m){e=k(m,"DIV",{class:!0});var _=g(e);s=k(_,"H2",{class:!0});var d=g(s);r=N(d,t),d.forEach(u),a=j(_),l=k(_,"DIV",{class:!0});var w=g(l);w.forEach(u),o=j(_);for(let x=0;x<c.length;x+=1)c[x].l(_);h=j(_),_.forEach(u),this.h()},h(){v(s,"class","actionName svelte-a8kia8"),v(l,"class","solution_text svelte-a8kia8"),v(e,"class","action svelte-a8kia8")},m(m,_){I(m,e,_),p(e,s),p(s,r),p(e,a),p(e,l),l.innerHTML=f,p(e,o);for(let d=0;d<c.length;d+=1)c[d].m(e,null);p(e,h)},p(m,_){if(_&1&&t!==(t=m[3].actionName+"")&&O(r,t),_&1&&f!==(f=m[3].solution+"")&&(l.innerHTML=f),_&1){n=m[3].templateSteps;let d;for(d=0;d<n.length;d+=1){const w=te(m,n,d);c[d]?c[d].p(w,_):(c[d]=re(w),c[d].c(),c[d].m(e,h))}for(;d<c.length;d+=1)c[d].d(1);c.length=n.length}},d(m){m&&u(e),B(c,m)}}}function Ie(i){let e,s=i[0].actions,t=[];for(let r=0;r<s.length;r+=1)t[r]=ae(ee(i,s,r));return{c(){e=b("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var a=g(e);for(let l=0;l<t.length;l+=1)t[l].l(a);a.forEach(u),this.h()},h(){v(e,"class","result_container")},m(r,a){I(r,e,a);for(let l=0;l<t.length;l+=1)t[l].m(e,null);i[2](e)},p(r,[a]){if(a&1){s=r[0].actions;let l;for(l=0;l<s.length;l+=1){const f=ee(r,s,l);t[l]?t[l].p(f,a):(t[l]=ae(f),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},i:R,o:R,d(r){r&&u(e),B(t,r),i[2](null)}}}function xe(i,e,s){let{result:t={}}=e,r=document.body;ce(()=>{console.log("Result component: ",t)}),me(()=>{var l;console.log(window.renderMathInElement),(l=window==null?void 0:window.renderMathInElement)==null||l.call(window,r,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})});function a(l){ue[l?"unshift":"push"](()=>{r=l,s(1,r)})}return i.$$set=l=>{"result"in l&&s(0,t=l.result)},[t,r,a]}class Se extends ne{constructor(e){super(),oe(this,e,xe,Ie,ie,{result:0})}}function De(i){let e;function s(a,l){return a[2]&&a[2].value?Ne:Me}let t=s(i),r=t(i);return{c(){e=b("div"),r.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=g(e);r.l(l),l.forEach(u),this.h()},h(){v(e,"class","prompt_message svelte-xm4bze")},m(a,l){I(a,e,l),r.m(e,null)},p(a,l){t!==(t=s(a))&&(r.d(1),r=t(a),r&&(r.c(),r.m(e,null)))},i:R,o:R,d(a){a&&u(e),r.d()}}}function we(i){let e,s,t,r;const a=[je,Ve],l=[];function f(o,h){return o[0].isError?0:1}return e=f(i),s=l[e]=a[e](i),{c(){s.c(),t=Z()},l(o){s.l(o),t=Z()},m(o,h){l[e].m(o,h),I(o,t,h),r=!0},p(o,h){let n=e;e=f(o),e===n?l[e].p(o,h):(_e(),P(l[n],1,1,()=>{l[n]=null}),fe(),s=l[e],s?s.p(o,h):(s=l[e]=a[e](o),s.c()),L(s,1),s.m(t.parentNode,t))},i(o){r||(L(s),r=!0)},o(o){P(s),r=!1},d(o){l[e].d(o),o&&u(t)}}}function Me(i){let e;return{c(){e=M("Enter a math formula to solve!")},l(s){e=N(s,"Enter a math formula to solve!")},m(s,t){I(s,e,t)},d(s){s&&u(e)}}}function Ne(i){let e;return{c(){e=M("Click solve to try to solve!")},l(s){e=N(s,"Click solve to try to solve!")},m(s,t){I(s,e,t)},d(s){s&&u(e)}}}function Ve(i){let e,s;return e=new Se({props:{result:i[0]}}),{c(){ke(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,r){ye(e,t,r),s=!0},p(t,r){const a={};r&1&&(a.result=t[0]),e.$set(a)},i(t){s||(L(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){Ee(e,t)}}}function je(i){let e,s,t=(i[0].errorDisplayMessage||i[0].errorMessage||"Math invalid")+"",r;return{c(){e=b("span"),s=M("There was an error: "),r=M(t),this.h()},l(a){e=k(a,"SPAN",{class:!0});var l=g(e);s=N(l,"There was an error: "),r=N(l,t),l.forEach(u),this.h()},h(){v(e,"class","error svelte-xm4bze")},m(a,l){I(a,e,l),p(e,s),p(e,r)},p(a,l){l&1&&t!==(t=(a[0].errorDisplayMessage||a[0].errorMessage||"Math invalid")+"")&&O(r,t)},i:R,o:R,d(a){a&&u(e)}}}function Te(i){let e,s,t,r,a,l,f,o,h,n,c,m,_,d,w,x,E,S,H,q,F;const A=[we,De],T=[];function G(y,D){return y[0]?0:1}return E=G(i),S=T[E]=A[E](i),{c(){e=b("script"),t=b("link"),r=b("script"),l=b("script"),o=V(),h=b("div"),n=b("div"),c=b("math-field"),m=V(),_=b("button"),d=M("Solve"),w=V(),x=b("div"),S.c(),this.h()},l(y){const D=pe('[data-svelte="svelte-1e56vpb"]',document.head);e=k(D,"SCRIPT",{src:!0,class:!0});var $=g(e);$.forEach(u),t=k(D,"LINK",{rel:!0,href:!0,class:!0}),r=k(D,"SCRIPT",{src:!0,class:!0});var he=g(r);he.forEach(u),l=k(D,"SCRIPT",{src:!0,class:!0});var de=g(l);de.forEach(u),D.forEach(u),o=j(y),h=k(y,"DIV",{class:!0});var K=g(h);n=k(K,"DIV",{class:!0});var z=g(n);c=k(z,"MATH-FIELD",{"smart-mode":!0,"smart-fence":!0,defaultmode:!0,"virtual-keyboard-mode":!0,class:!0}),g(c).forEach(u),m=j(z),_=k(z,"BUTTON",{class:!0});var W=g(_);d=N(W,"Solve"),W.forEach(u),w=j(z),x=k(z,"DIV",{class:!0});var Q=g(x);S.l(Q),Q.forEach(u),z.forEach(u),K.forEach(u),this.h()},h(){J(e.src,s="https://unpkg.com/mathlive@0.73.4/dist/mathlive.min.js")||v(e,"src",s),v(e,"class","svelte-xm4bze"),v(t,"rel","stylesheet"),v(t,"href","https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"),v(t,"class","svelte-xm4bze"),r.defer=!0,J(r.src,a="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js")||v(r,"src",a),v(r,"class","svelte-xm4bze"),l.defer=!0,J(l.src,f="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js")||v(l,"src",f),v(l,"class","svelte-xm4bze"),C(c,"smart-mode",""),C(c,"smart-fence",""),C(c,"defaultmode","math"),C(c,"virtual-keyboard-mode","manual"),C(c,"class","svelte-xm4bze"),v(_,"class","solve svelte-xm4bze"),v(x,"class","result svelte-xm4bze"),v(n,"class","inner_container svelte-xm4bze"),v(h,"class","container svelte-xm4bze")},m(y,D){p(document.head,e),p(document.head,t),p(document.head,r),p(document.head,l),I(y,o,D),I(y,h,D),p(h,n),p(n,c),i[5](c),p(n,m),p(n,_),p(_,d),p(n,w),p(n,x),T[E].m(x,null),H=!0,q||(F=[X(c,"input",i[4]),X(_,"click",i[3])],q=!0)},p(y,[D]){let $=E;E=G(y),E===$?T[E].p(y,D):(_e(),P(T[$],1,1,()=>{T[$]=null}),fe(),S=T[E],S?S.p(y,D):(S=T[E]=A[E](y),S.c()),L(S,1),S.m(x,null))},i(y){H||(L(S),H=!0)},o(y){P(S),H=!1},d(y){u(e),u(t),u(r),u(l),y&&u(o),y&&u(h),i[5](null),T[E].d(),q=!1,ve(F)}}}function ze(i,e,s){let t;be(i,U,n=>s(6,t=n));let r=null,a=String.raw`x = 3, y = x^2`,l=null;ce(()=>{l.setValue(a)});async function f(){Y(U,t=!0,t);let n=a,c=await fetch("https://apis.explosionscratc.repl.co/fetch",{method:"POST",body:JSON.stringify({url:"https://mathsolver.microsoft.com/cameraexp/api/v1/solvelatex",args:{headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({latexExpression:n,clientInfo:{platform:"web",mkt:"en",skipGraphOutput:!0,skipBingVideoEntity:!0},customLatex:n,showCustomResult:!1}),referrer:`https://mathsolver.microsoft.com/en/solve-problem/${encodeURIComponent(n)}`,referrerPolicy:"strict-origin-when-cross-origin",method:"POST"}})}).then(m=>m.json());s(0,r=JSON.parse(JSON.parse(c.json.results[0].tags[0].actions[0].customData).previewText).mathSolverResult),Y(U,t=!1,t)}const o=n=>s(1,a=n.target.value);function h(n){ue[n?"unshift":"push"](()=>{l=n,s(2,l)})}return[r,a,l,f,o,h]}class Ce extends ne{constructor(e){super(),oe(this,e,ze,Te,ie,{})}}export{Ce as default};
