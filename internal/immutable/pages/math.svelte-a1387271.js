var Re=Object.defineProperty,je=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ie=(c,e,t)=>e in c?Re(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t,B=(c,e)=>{for(var t in e||(e={}))Ve.call(e,t)&&ie(c,t,e[t]);if(ae)for(var t of ae(e))Ce.call(e,t)&&ie(c,t,e[t]);return c},J=(c,e)=>je(c,Ne(e));import{S as F,i as K,s as Z,e as g,k as j,N as ke,c as b,a as k,d as p,m as N,Z as A,b as _,F as m,g as S,E as L,v as X,$ as Y,t as C,w as ye,h as T,x as we,y as Ee,j as O,q as $,o as M,B as xe,L as Q,n as ee,p as te,V as Se,u as Te,al as H,O as oe,U as $e,W as ce,l as ue}from"../chunks/index-b92f0203.js";import{l as W}from"../chunks/store-06e9ac32.js";import{u as he}from"../chunks/utils-39eb2155.js";import"../chunks/index-c9376b27.js";function qe(c){let e,t,r,l,o,s,u,a;return{c(){e=g("script"),r=g("script"),o=g("script"),u=j(),a=g("canvas"),this.h()},l(n){const i=ke('[data-svelte="svelte-1i3dr7q"]',document.head);e=b(i,"SCRIPT",{src:!0});var h=k(e);h.forEach(p),r=b(i,"SCRIPT",{src:!0});var f=k(r);f.forEach(p),o=b(i,"SCRIPT",{src:!0});var v=k(o);v.forEach(p),i.forEach(p),u=N(n),a=b(n,"CANVAS",{class:!0}),k(a).forEach(p),this.h()},h(){A(e.src,t="https://cdn.jsdelivr.net/npm/chart.js")||_(e,"src",t),A(r.src,l="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8")||_(r,"src",l),r.defer=!0,A(o.src,s="https://unpkg.com/chartjs-plugin-zoom@1.2.1/dist/chartjs-plugin-zoom.min.js")||_(o,"src",s),o.defer=!0,_(a,"class","chart")},m(n,i){m(document.head,e),m(document.head,r),m(document.head,o),S(n,u,i),S(n,a,i),c[3](a)},p:L,i:L,o:L,d(n){p(e),p(r),p(o),n&&p(u),n&&p(a),c[3](null)}}}function Me(c,e,t){let r,{limits:l={}}=e,{graphs:o=[]}=e;X(async()=>{const u=await he(()=>window.Chart);fetch("https://unpkg.com/chartjs-plugin-zoom@1.2.1/dist/chartjs-plugin-zoom.min.js").then(a=>a.text()).then(eval).then(()=>{he(()=>window.ChartZoom).then(()=>u.register(window.ChartZoom))}),new u(r,{type:"line",data:{datasets:o.map(a=>({label:a.name,tension:.3,pointRadius:0,borderColor:["#357B85"],data:a.points}))},options:{responsive:!0,scales:{x:{type:"linear",position:"bottom"}},plugins:{zoom:{limits:{x:{min:l.minX,max:l.maxX},y:{min:l.minY,max:l.maxY}},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0}}},responsive:!0,maintainAspectRatio:!0}})});function s(u){Y[u?"unshift":"push"](()=>{r=u,t(0,r)})}return c.$$set=u=>{"limits"in u&&t(1,l=u.limits),"graphs"in u&&t(2,o=u.graphs)},[r,l,o,s]}class Le extends F{constructor(e){super(),K(this,e,Me,qe,Z,{limits:1,graphs:2})}}function ve(c,e,t){const r=c.slice();return r[4]=e[t],r}function pe(c,e,t){const r=c.slice();return r[7]=e[t],r}function de(c,e,t){const r=c.slice();return r[10]=e[t],r}function fe(c){let e,t,r=c[0].allGraphData[0].actionName+"",l,o,s,u,a;return u=new Le({props:{graphs:c[0].allGraphData[0].rawGraphData.curveData.map(be),limits:c[0].allGraphData[0].displayRange}}),{c(){e=g("div"),t=g("h2"),l=C(r),o=j(),s=j(),ye(u.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=k(e);t=b(i,"H2",{class:!0});var h=k(t);l=T(h,r),h.forEach(p),o=N(i),s=N(i),we(u.$$.fragment,i),i.forEach(p),this.h()},h(){_(t,"class","actionName svelte-1s9unyk"),_(e,"class","action svelte-1s9unyk")},m(n,i){S(n,e,i),m(e,t),m(t,l),m(e,o),m(e,s),Ee(u,e,null),a=!0},p(n,i){(!a||i&1)&&r!==(r=n[0].allGraphData[0].actionName+"")&&O(l,r);const h={};i&1&&(h.graphs=n[0].allGraphData[0].rawGraphData.curveData.map(be)),i&1&&(h.limits=n[0].allGraphData[0].displayRange),u.$set(h)},i(n){a||($(u.$$.fragment,n),a=!0)},o(n){M(u.$$.fragment,n),a=!1},d(n){n&&p(e),xe(u)}}}function me(c){let e,t,r=c[10].prevExpression+"",l,o,s,u=c[10].expression+"",a,n,i,h=c[10].step+"",f;return{c(){e=g("div"),t=g("div"),l=C(r),o=j(),s=g("div"),a=C(u),n=j(),i=g("div"),f=C(h),this.h()},l(v){e=b(v,"DIV",{class:!0});var d=k(e);t=b(d,"DIV",{class:!0});var y=k(t);l=T(y,r),y.forEach(p),o=N(d),s=b(d,"DIV",{class:!0});var I=k(s);a=T(I,u),I.forEach(p),d.forEach(p),n=N(v),i=b(v,"DIV",{class:!0});var w=k(i);f=T(w,h),w.forEach(p),this.h()},h(){_(t,"class","from svelte-1s9unyk"),_(s,"class","to svelte-1s9unyk"),_(e,"class","from_to_container svelte-1s9unyk"),_(i,"class","text svelte-1s9unyk")},m(v,d){S(v,e,d),m(e,t),m(t,l),m(e,o),m(e,s),m(s,a),S(v,n,d),S(v,i,d),m(i,f)},p(v,d){d&1&&r!==(r=v[10].prevExpression+"")&&O(l,r),d&1&&u!==(u=v[10].expression+"")&&O(a,u),d&1&&h!==(h=v[10].step+"")&&O(f,h)},d(v){v&&p(e),v&&p(n),v&&p(i)}}}function _e(c){let e,t=c[7].templateName+"",r,l,o,s=c[7].steps,u=[];for(let a=0;a<s.length;a+=1)u[a]=me(de(c,s,a));return{c(){e=g("h4"),r=C(t),l=j(),o=g("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=b(a,"H4",{class:!0});var n=k(e);r=T(n,t),n.forEach(p),l=N(a),o=b(a,"DIV",{class:!0});var i=k(o);for(let h=0;h<u.length;h+=1)u[h].l(i);i.forEach(p),this.h()},h(){_(e,"class","solutionName svelte-1s9unyk"),_(o,"class","steps svelte-1s9unyk")},m(a,n){S(a,e,n),m(e,r),S(a,l,n),S(a,o,n);for(let i=0;i<u.length;i+=1)u[i].m(o,null)},p(a,n){if(n&1&&t!==(t=a[7].templateName+"")&&O(r,t),n&1){s=a[7].steps;let i;for(i=0;i<s.length;i+=1){const h=de(a,s,i);u[i]?u[i].p(h,n):(u[i]=me(h),u[i].c(),u[i].m(o,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=s.length}},d(a){a&&p(e),a&&p(l),a&&p(o),Q(u,a)}}}function ge(c){let e,t,r=c[4].actionName+"",l,o,s,u=c[4].solution+"",a,n,i=c[4].templateSteps,h=[];for(let f=0;f<i.length;f+=1)h[f]=_e(pe(c,i,f));return{c(){e=g("div"),t=g("h2"),l=C(r),o=j(),s=g("div"),a=j();for(let f=0;f<h.length;f+=1)h[f].c();n=j(),this.h()},l(f){e=b(f,"DIV",{class:!0});var v=k(e);t=b(v,"H2",{class:!0});var d=k(t);l=T(d,r),d.forEach(p),o=N(v),s=b(v,"DIV",{class:!0});var y=k(s);y.forEach(p),a=N(v);for(let I=0;I<h.length;I+=1)h[I].l(v);n=N(v),v.forEach(p),this.h()},h(){_(t,"class","actionName svelte-1s9unyk"),_(s,"class","solution_text svelte-1s9unyk"),_(e,"class","action svelte-1s9unyk")},m(f,v){S(f,e,v),m(e,t),m(t,l),m(e,o),m(e,s),s.innerHTML=u,m(e,a);for(let d=0;d<h.length;d+=1)h[d].m(e,null);m(e,n)},p(f,v){if(v&1&&r!==(r=f[4].actionName+"")&&O(l,r),v&1&&u!==(u=f[4].solution+"")&&(s.innerHTML=u),v&1){i=f[4].templateSteps;let d;for(d=0;d<i.length;d+=1){const y=pe(f,i,d);h[d]?h[d].p(y,v):(h[d]=_e(y),h[d].c(),h[d].m(e,n))}for(;d<h.length;d+=1)h[d].d(1);h.length=i.length}},d(f){f&&p(e),Q(h,f)}}}function Oe(c){var u,a;let e,t,r,l=((a=(u=c[0].allGraphData)==null?void 0:u[0])==null?void 0:a.graphImageData)&&!c[2]&&fe(c),o=c[0].actions,s=[];for(let n=0;n<o.length;n+=1)s[n]=ge(ve(c,o,n));return{c(){e=g("div"),l&&l.c(),t=j();for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var i=k(e);l&&l.l(i),t=N(i);for(let h=0;h<s.length;h+=1)s[h].l(i);i.forEach(p),this.h()},h(){_(e,"class","result_container")},m(n,i){S(n,e,i),l&&l.m(e,null),m(e,t);for(let h=0;h<s.length;h+=1)s[h].m(e,null);c[3](e),r=!0},p(n,[i]){var h,f;if(((f=(h=n[0].allGraphData)==null?void 0:h[0])==null?void 0:f.graphImageData)&&!n[2]?l?(l.p(n,i),i&5&&$(l,1)):(l=fe(n),l.c(),$(l,1),l.m(e,t)):l&&(ee(),M(l,1,1,()=>{l=null}),te()),i&1){o=n[0].actions;let v;for(v=0;v<o.length;v+=1){const d=ve(n,o,v);s[v]?s[v].p(d,i):(s[v]=ge(d),s[v].c(),s[v].m(e,null))}for(;v<s.length;v+=1)s[v].d(1);s.length=o.length}},i(n){r||($(l),r=!0)},o(n){M(l),r=!1},d(n){n&&p(e),l&&l.d(),Q(s,n),c[3](null)}}}const be=c=>({name:c.curveExpression,points:c.pointGroups.map(e=>e.points).flat()});function Pe(c,e,t){let r;Se(c,W,u=>t(2,r=u));let{result:l={}}=e,o=document.body;X(()=>{console.log("Result component: ",l)}),Te(()=>{var u;console.log(window.renderMathInElement),(u=window==null?void 0:window.renderMathInElement)==null||u.call(window,o,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})});function s(u){Y[u?"unshift":"push"](()=>{o=u,t(1,o)})}return c.$$set=u=>{"result"in u&&t(0,l=u.result)},[l,o,r,s]}class Ae extends F{constructor(e){super(),K(this,e,Pe,Oe,Z,{result:0})}}function Ge(c){let e;function t(o,s){return o[2]&&o[2].value?He:Ue}let r=t(c),l=r(c);return{c(){e=g("div"),l.c(),this.h()},l(o){e=b(o,"DIV",{class:!0});var s=k(e);l.l(s),s.forEach(p),this.h()},h(){_(e,"class","prompt_message svelte-i5sevh")},m(o,s){S(o,e,s),l.m(e,null)},p(o,s){r!==(r=t(o))&&(l.d(1),l=r(o),l&&(l.c(),l.m(e,null)))},i:L,o:L,d(o){o&&p(e),l.d()}}}function ze(c){let e,t,r,l;const o=[Be,We],s=[];function u(a,n){return a[0].isError||a[3].isError?0:1}return e=u(c),t=s[e]=o[e](c),{c(){t.c(),r=ue()},l(a){t.l(a),r=ue()},m(a,n){s[e].m(a,n),S(a,r,n),l=!0},p(a,n){let i=e;e=u(a),e===i?s[e].p(a,n):(ee(),M(s[i],1,1,()=>{s[i]=null}),te(),t=s[e],t?t.p(a,n):(t=s[e]=o[e](a),t.c()),$(t,1),t.m(r.parentNode,r))},i(a){l||($(t),l=!0)},o(a){M(t),l=!1},d(a){s[e].d(a),a&&p(r)}}}function Ue(c){let e;return{c(){e=C("Enter a math formula to solve!")},l(t){e=T(t,"Enter a math formula to solve!")},m(t,r){S(t,e,r)},d(t){t&&p(e)}}}function He(c){let e;return{c(){e=C("Click solve to try to solve!")},l(t){e=T(t,"Click solve to try to solve!")},m(t,r){S(t,e,r)},d(t){t&&p(e)}}}function We(c){let e,t;return e=new Ae({props:{result:c[0]}}),{c(){ye(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Ee(e,r,l),t=!0},p(r,l){const o={};l&1&&(o.result=r[0]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Be(c){let e,t,r=(c[3].errorMessage||c[0].errorDisplayMessage||c[0].errorMessage||"Math invalid")+"",l;return{c(){e=g("span"),t=C("There was an error: "),l=C(r),this.h()},l(o){e=b(o,"SPAN",{class:!0});var s=k(e);t=T(s,"There was an error: "),l=T(s,r),s.forEach(p),this.h()},h(){_(e,"class","error svelte-i5sevh")},m(o,s){S(o,e,s),m(e,t),m(e,l)},p(o,s){s&9&&r!==(r=(o[3].errorMessage||o[0].errorDisplayMessage||o[0].errorMessage||"Math invalid")+"")&&O(l,r)},i:L,o:L,d(o){o&&p(e)}}}function Je(c){let e,t,r,l,o,s,u,a,n,i,h,f,v,d,y,I,w,E,x,R,G;const U=[ze,Ge],q=[];function se(D,V){return D[0]?0:1}return w=se(c),E=q[w]=U[w](c),{c(){e=g("script"),r=g("link"),l=g("script"),s=g("script"),a=j(),n=g("div"),i=g("div"),h=g("math-field"),f=j(),v=g("button"),d=C("Solve"),y=j(),I=g("div"),E.c(),this.h()},l(D){const V=ke('[data-svelte="svelte-1e56vpb"]',document.head);e=b(V,"SCRIPT",{src:!0,class:!0});var z=k(e);z.forEach(p),r=b(V,"LINK",{rel:!0,href:!0,class:!0}),l=b(V,"SCRIPT",{src:!0,class:!0});var De=k(l);De.forEach(p),s=b(V,"SCRIPT",{src:!0,class:!0});var Ie=k(s);Ie.forEach(p),V.forEach(p),a=N(D),n=b(D,"DIV",{class:!0});var re=k(n);i=b(re,"DIV",{class:!0});var P=k(i);h=b(P,"MATH-FIELD",{"smart-mode":!0,defaultmode:!0,"virtual-keyboard-mode":!0,class:!0}),k(h).forEach(p),f=N(P),v=b(P,"BUTTON",{class:!0});var le=k(v);d=T(le,"Solve"),le.forEach(p),y=N(P),I=b(P,"DIV",{class:!0});var ne=k(I);E.l(ne),ne.forEach(p),P.forEach(p),re.forEach(p),this.h()},h(){A(e.src,t="https://unpkg.com/mathlive@0.73.4/dist/mathlive.min.js")||_(e,"src",t),_(e,"class","svelte-i5sevh"),_(r,"rel","stylesheet"),_(r,"href","https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"),_(r,"class","svelte-i5sevh"),l.defer=!0,A(l.src,o="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js")||_(l,"src",o),_(l,"class","svelte-i5sevh"),s.defer=!0,A(s.src,u="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js")||_(s,"src",u),_(s,"class","svelte-i5sevh"),H(h,"smart-mode",""),H(h,"defaultmode","math"),H(h,"virtual-keyboard-mode","manual"),H(h,"class","svelte-i5sevh"),_(v,"class","solve svelte-i5sevh"),_(I,"class","result svelte-i5sevh"),_(i,"class","inner_container svelte-i5sevh"),_(n,"class","container svelte-i5sevh")},m(D,V){m(document.head,e),m(document.head,r),m(document.head,l),m(document.head,s),S(D,a,V),S(D,n,V),m(n,i),m(i,h),c[6](h),m(i,f),m(i,v),m(v,d),m(i,y),m(i,I),q[w].m(I,null),x=!0,R||(G=[oe(h,"input",c[5]),oe(v,"click",c[4])],R=!0)},p(D,[V]){let z=w;w=se(D),w===z?q[w].p(D,V):(ee(),M(q[z],1,1,()=>{q[z]=null}),te(),E=q[w],E?E.p(D,V):(E=q[w]=U[w](D),E.c()),$(E,1),E.m(I,null))},i(D){x||($(E),x=!0)},o(D){M(E),x=!1},d(D){p(e),p(r),p(l),p(s),D&&p(a),D&&p(n),c[6](null),q[w].d(),R=!1,$e(G)}}}function Fe(c,e,t){let r;Se(c,W,h=>t(7,r=h));let l=null,o=String.raw`x = 3, y = x^2`,s=null,u={};X(()=>{window.mathField=s,s.setValue(new URLSearchParams(location.search).get("q")||o),new URLSearchParams(location.search).get("q")&&setTimeout(a),s.setOptions(J(B({},s.getOptions()),{smartSuperscript:!0,onKeystroke(h,f,v){f==="ctrl+[KeyA]"&&h.executeCommand("selectAll");const d=String.raw`\left.\begin{cases}`,y=String.raw`\end{cases}\right.`,I=String.raw`\placeholder{New equation}`,w=String.raw`\\{${I}}${y}`;if(f==="shift+[Enter]"){let x=s.value;if(x.startsWith(d)){console.log({START:d,ENDCASES:y},x.includes(y));let R=x.replace(new RegExp(`^${E(d)}`),"").replace(new RegExp(`${E(y)}$`),"");console.log(R),h.setValue(`${d}${R}${w}`)}else{let R=s.position;h.setValue(d+`{${s.value}}`+w),t(2,s.position=R+7,s)}}function E(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}if(f==="[Backspace]"){if(s.value===String.raw`\left.\begin{cases}{}\end{cases}\right.`){s.setValue("");return}let x=s.value,R=String.raw`\\ {}`;if(console.log({val:x},x.startsWith(d),x.endsWith(R+y),R+y),x.startsWith(d)&&(x.endsWith(R+y)||x.endsWith(R+" "+y))){let G=x.replace(new RegExp(`^${E(d)}`),"").replace(new RegExp(`${E(R)}[ \\\\]*${E(y)}$`),"");console.log(G);let U=s.position;s.setValue(`${d}${G}${y}`),t(2,s.position=U-3,s)}}return f==="ctrl+[Backspace]"&&h.setValue(""),(f==="ctrl+[Enter]"||f==="[Enter]")&&a(),!0},inlineShortcuts:J(B({},s.getOptions("inlineShortcuts")),{"*":"\\cdot","**":"\\ast","***":"\\star","//":"\\slash","\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","o+":"\\oplus",ox:"\\otimes","o.":"\\odot","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceiling","~|":"\\rceiling",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail"})}))});async function a(){ce(W,r=!0,r);let h=o,f=await fetch("https://apis.explosionscratc.repl.co/fetch",{method:"POST",body:JSON.stringify({url:"https://mathsolver.microsoft.com/cameraexp/api/v1/solvelatex",args:{headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({latexExpression:h,clientInfo:{platform:"web",mkt:"en",skipGraphOutput:!0,skipBingVideoEntity:!0},customLatex:h,showCustomResult:!1}),referrer:`https://mathsolver.microsoft.com/en/solve-problem/${encodeURIComponent(h)}`,referrerPolicy:"strict-origin-when-cross-origin",method:"POST"}})}).then(y=>y.json());t(0,l=JSON.parse(JSON.parse(f.json.results[0].tags[0].actions[0].customData).previewText).mathSolverResult),t(3,u=JSON.parse(f.json.results[0].tags[0].actions[0].customData)),console.log(u);let v=new URL(location),d=new URLSearchParams(location.search);d.set("q",l.detectedLatex),v.search=d,history.pushState({result:l},"Math solver",v),ce(W,r=!1,r)}const n=h=>t(1,o=h.target.value);function i(h){Y[h?"unshift":"push"](()=>{s=h,t(2,s)})}return[l,o,s,u,a,n,i]}class et extends F{constructor(e){super(),K(this,e,Fe,Je,Z,{})}}export{et as default};
